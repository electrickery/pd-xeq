#N canvas 855 172 747 684 12;
#X declare -lib xeq/xeq;
#X msg 41 111 edit;
#X msg 401 356 bang;
#X msg 410 385 rewind;
#X msg 393 326 next;
#X msg 417 413 stop;
#X obj 298 140 r cue;
#X obj 393 288 stripnote;
#X obj 163 350 noteout;
#X msg 140 151 bang;
#X msg 151 182 rewind \, flush;
#X msg 159 215 stop \, flush;
#X obj 393 215 notein;
#X obj 393 255 noteout;
#X obj 528 235 sel 0;
#X floatatom 568 300 5 0 0 0 - - -, f 5;
#X msg 281 215 tempo \$1;
#X msg 281 182 1;
#X obj 424 160 _xeq q;
#X obj 82 215 r q;
#X msg 362 140 bang;
#X msg 485 72 rewind;
#X msg 424 72 next;
#X msg 99 111 editok;
#X msg 485 140 edit;
#X msg 542 140 editok;
#N canvas 1 79 359 352 counter 0;
#X obj 103 53 inlet;
#X obj 186 53 inlet;
#X obj 103 271 outlet;
#X obj 186 94 t b 0;
#X msg 153 135 0;
#X obj 103 135 int;
#X obj 103 182 + 1;
#X obj 103 227 sel -1;
#X msg 103 94 bang;
#X connect 0 0 8 0;
#X connect 1 0 3 0;
#X connect 3 0 4 0;
#X connect 3 1 7 1;
#X connect 4 0 5 1;
#X connect 5 0 6 0;
#X connect 6 0 5 1;
#X connect 6 0 7 0;
#X connect 7 0 2 0;
#X connect 8 0 5 0;
#X restore 130 526 pd counter;
#X obj 215 485 r count-to;
#X obj 130 559 del 0;
#X msg 26 72 mfread mf/kanon.mid -track;
#X msg 555 72 read ql/q1.txt;
#X msg 485 105 write ql/q1.txt;
#X msg 129 398 locate step 3200 \, follow 1 \; cue rewind \; q rewind
\, flush \; count-to 5;
#X msg 130 592 locate step 3200 \, follow 1 \; cue next \; count-to
5;
#X obj 568 267 a/tapping;
#X obj 501 526 print miss;
#X obj 533 363 abs;
#X msg 533 443 nextnote \, follow 1;
#X obj 533 403 moses 2;
#X obj 427 559 print hit;
#X obj 299 19 loadbang;
#X obj 29 378 r restart;
#X obj 299 52 t b b b;
#X obj 299 85 s restart;
#X text 534 478 semitone tolerance;
#X obj 461 496 t 0 0;
#X text 400 14 play last five notes of the theme...;
#X text 400 44 ...and again...;
#X obj 30 301 fiddle~;
#X floatatom 30 343 5 0 0 0 - - -, f 5;
#X obj 30 263 adc~;
#X obj 89 344 - 14;
#X obj 163 284 unpack;
#X obj 163 317 + 2;
#X obj 584 650 declare -lib xeq/xeq;
#X text 31 15 previously called x.following.pd;
#X obj 26 151 _xeq x;
#X obj 140 250 _xeq_parse x y;
#X obj 393 463 _xeq_follow x;
#X text 379 601 this crashes with a "double free or corruption";
#X connect 0 0 55 0;
#X connect 1 0 57 0;
#X connect 2 0 57 0;
#X connect 3 0 57 0;
#X connect 4 0 57 0;
#X connect 5 0 17 0;
#X connect 6 0 57 0;
#X connect 8 0 56 0;
#X connect 9 0 56 0;
#X connect 10 0 56 0;
#X connect 11 0 12 0;
#X connect 11 0 6 0;
#X connect 11 1 12 1;
#X connect 11 1 6 1;
#X connect 11 1 13 0;
#X connect 11 2 12 2;
#X connect 13 1 33 0;
#X connect 15 0 56 0;
#X connect 16 0 15 0;
#X connect 18 0 56 0;
#X connect 19 0 17 0;
#X connect 20 0 17 0;
#X connect 21 0 17 0;
#X connect 22 0 55 0;
#X connect 23 0 17 0;
#X connect 24 0 17 0;
#X connect 25 0 27 0;
#X connect 26 0 25 1;
#X connect 27 0 32 0;
#X connect 28 0 55 0;
#X connect 29 0 17 0;
#X connect 30 0 17 0;
#X connect 31 0 57 0;
#X connect 32 0 57 0;
#X connect 33 0 14 0;
#X connect 33 0 15 0;
#X connect 35 0 37 0;
#X connect 36 0 57 0;
#X connect 37 0 36 0;
#X connect 39 0 41 0;
#X connect 40 0 31 0;
#X connect 41 0 42 0;
#X connect 41 1 28 0;
#X connect 41 2 29 0;
#X connect 44 0 35 0;
#X connect 44 1 34 0;
#X connect 47 0 48 0;
#X connect 47 0 50 0;
#X connect 49 0 47 0;
#X connect 50 0 57 0;
#X connect 51 0 52 0;
#X connect 51 1 7 1;
#X connect 52 0 7 0;
#X connect 56 0 51 0;
#X connect 57 1 25 0;
#X connect 57 1 38 0;
#X connect 57 2 44 0;
